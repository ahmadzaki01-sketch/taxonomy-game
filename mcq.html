<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kuis MCQ Taksonomi</title>
<link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
<div class="container">
  <h1>Kuis MCQ Taksonomi</h1>

  <!-- Login -->
  <div id="start">
    <h2>Login Siswa</h2>
    <label>Nama: <input id="name" required></label><br>
    <label>Kelas: <input id="kelas" required></label><br>
    <label>No Absen: <input id="absen" type="number" required></label><br>
    <button id="begin">Mulai Kuis</button>
  </div>

  <!-- Quiz -->
  <div id="quiz" style="display:none;">
    <div id="hud"></div>
    <h2 id="qtext"></h2>
    <div id="choices"></div>
    <button id="next">Soal Berikutnya</button>
  </div>

  <!-- Hasil -->
  <div id="result" style="display:none;">
    <h2>Hasil Kuis</h2>
    <p id="resText"></p>
    <button id="send">Kirim Hasil</button>
  </div>
</div>

<script>
// =====================
// DATA SOAL (30 soal)
// =====================
const questions = [
  // LEVEL 1 (Domain & Kingdom)
  {question: "Domain manakah yang mencakup organisme prokariot dengan dinding sel peptidoglikan?", choices:["Bacteria","Archaea","Eukarya","Protista"], answer:0},
  {question: "Domain manakah yang mencakup organisme uniseluler ekstremofil?", choices:["Archaea","Bacteria","Eukarya","Plantae"], answer:0},
  {question: "Domain manakah yang mencakup organisme dengan inti sejati (nukleus)?", choices:["Eukarya","Bacteria","Archaea","Virus"], answer:0},
  {question: "Kingdom yang memiliki klorofil, dinding sel selulosa, dan mampu fotosintesis adalah…", choices:["Plantae","Animalia","Fungi","Protista"], answer:0},
  {question: "Kingdom yang bersifat heterotrof, multiseluler, tidak punya dinding sel adalah…", choices:["Animalia","Fungi","Plantae","Monera"], answer:0},
  {question: "Kingdom yang memiliki dinding sel dari kitin adalah…", choices:["Plantae","Animalia","Fungi","Protista"], answer:2},
  {question: "Protista mirip hewan disebut…", choices:["Protozoa","Alga","Jamur lendir","Monera"], answer:0},
  {question: "Protista mirip tumbuhan disebut…", choices:["Alga","Protozoa","Fungi","Virus"], answer:0},
  {question: "Kingdom Monera kini terbagi menjadi…", choices:["Bacteria dan Archaea","Bacteria dan Protista","Bacteria dan Virus","Archaea dan Protista"], answer:0},
  {question: "Kingdom yang terdiri dari organisme saprofit dan parasit, contohnya jamur, adalah…", choices:["Fungi","Plantae","Animalia","Protista"], answer:0},

  // LEVEL 2 (Filum & Divisio)
  {question: "Filum pada hewan invertebrata dengan tubuh bersegmen, misalnya cacing tanah, adalah…", choices:["Annelida","Arthropoda","Nematoda","Mollusca"], answer:0},
  {question: "Filum hewan dengan rangka luar (eksoskeleton) dari kitin adalah…", choices:["Arthropoda","Annelida","Mollusca","Echinodermata"], answer:0},
  {question: "Filum hewan laut simetris radial, misalnya bintang laut, adalah…", choices:["Echinodermata","Cnidaria","Porifera","Chordata"], answer:0},
  {question: "Filum hewan dengan notokorda pada tahap tertentu adalah…", choices:["Chordata","Echinodermata","Arthropoda","Mollusca"], answer:0},
  {question: "Filum tumbuhan lumut disebut…", choices:["Bryophyta","Pteridophyta","Gymnospermae","Angiospermae"], answer:0},
  {question: "Filum tumbuhan paku disebut…", choices:["Pteridophyta","Bryophyta","Gymnospermae","Angiospermae"], answer:0},
  {question: "Tumbuhan berbiji terbuka, contohnya pinus, termasuk divisi…", choices:["Gymnospermae","Angiospermae","Bryophyta","Pteridophyta"], answer:0},
  {question: "Tumbuhan berbiji tertutup disebut…", choices:["Angiospermae","Gymnospermae","Bryophyta","Pteridophyta"], answer:0},
  {question: "Angiospermae dibagi menjadi dua kelompok besar yaitu…", choices:["Monokotil dan Dikotil","Gymnospermae dan Angiospermae","Paku dan Lumut","Alga dan Bryophyta"], answer:0},
  {question: "Filum hewan tidak berpori sejati, hidup menetap di laut, contohnya spons, adalah…", choices:["Porifera","Cnidaria","Echinodermata","Annelida"], answer:0},

  // LEVEL 3 (Kelas – Ordo – Famili – Genus – Spesies)
  {question: "Manusia termasuk kelas…", choices:["Mammalia","Aves","Reptilia","Amphibia"], answer:0},
  {question: "Burung termasuk kelas…", choices:["Aves","Reptilia","Pisces","Amphibia"], answer:0},
  {question: "Katak hijau termasuk kelas…", choices:["Amphibia","Pisces","Reptilia","Mammalia"], answer:0},
  {question: "Ikan mas termasuk kelas…", choices:["Pisces","Amphibia","Mammalia","Reptilia"], answer:0},
  {question: "Harimau termasuk ordo…", choices:["Carnivora","Primata","Rodentia","Artiodactyla"], answer:0},
  {question: "Manusia termasuk ordo…", choices:["Primata","Carnivora","Perissodactyla","Cetacea"], answer:0},
  {question: "Kucing domestik termasuk famili…", choices:["Felidae","Canidae","Ursidae","Hominidae"], answer:0},
  {question: "Anjing termasuk famili…", choices:["Canidae","Felidae","Ursidae","Mustelidae"], answer:0},
  {question: "Nama genus manusia adalah…", choices:["Homo","Panthera","Felis","Canis"], answer:0},
  {question: "Nama spesies manusia modern adalah…", choices:["Homo sapiens","Homo erectus","Homo habilis","Homo neanderthalensis"], answer:0}
];

// =====================
// VARIABEL QUIZ
// =====================
let currentQuestion = 0;
let score = 0;
let startTime = null;

const qtext = document.getElementById('qtext');
const choicesEl = document.getElementById('choices');
const hud = document.getElementById('hud');
const quizDiv = document.getElementById('quiz');
const resultDiv = document.getElementById('result');
const startDiv = document.getElementById('start');

// =====================
// FUNGSI
// =====================
document.getElementById('begin').onclick = ()=>{
  if(!document.getElementById('name').value.trim()){alert('Masukkan nama');return;}
  if(!document.getElementById('kelas').value.trim()){alert('Masukkan kelas');return;}
  if(!document.getElementById('absen').value.trim()){alert('Masukkan no absen');return;}
  startDiv.style.display='none';
  quizDiv.style.display='block';
  startTime = Date.now();
  loadQuestion();
};

function loadQuestion(){
  const q = questions[currentQuestion];
  hud.innerText = `Soal ${currentQuestion+1} dari ${questions.length} | Skor: ${score}`;
  qtext.innerText = q.question;
  choicesEl.innerHTML='';
  q.choices.forEach((c,i)=>{
    const btn=document.createElement('button');
    btn.className='choice';
    btn.innerText=c;
    btn.onclick=()=>selectAnswer(i);
    choicesEl.appendChild(btn);
  });
}

function selectAnswer(choice){
  const q=questions[currentQuestion];
  if(choice===q.answer){score++;}
  document.getElementById('next').style.display='inline-block';
}

document.getElementById('next').onclick = ()=>{
  currentQuestion++;
  if(currentQuestion<questions.length){
    document.getElementById('next').style.display='none';
    loadQuestion();
  } else {
    endQuiz();
  }
};

function endQuiz(){
  quizDiv.style.display='none';
  resultDiv.style.display='block';
  const duration=Math.round((Date.now()-startTime)/1000);
  const percent=Math.round((score/questions.length)*100);
  document.getElementById('resText').innerText=
    `Benar ${score} dari ${questions.length} soal. Skor: ${percent}. Waktu: ${duration} detik.`;
}

// =====================
// KIRIM HASIL
// =====================
document.getElementById('send').onclick=()=>{
  const duration=Math.round((Date.now()-startTime)/1000);
  const payload={
    name: document.getElementById('name').value,
    class: document.getElementById('kelas').value,
    absen: document.getElementById('absen').value,
    game: 'mcq',
    score: Math.round((score/questions.length)*100),
    duration: duration,
    details: {}
  };
  fetch('https://script.google.com/macros/s/AKfycbxriqMKF5lnhhqS4-O-tPQE48GU14RcPLB3ySCslGdANE4211Jk75-xz7Oh2tiR6vqi/exec',{
    method:'POST',
    body:JSON.stringify(payload),
    headers:{'Content-Type':'application/json'}
  }).then(r=>r.json()).then(d=>{
    if(d.status==='success'){alert('Hasil terkirim!');}
    else{alert('Error: '+JSON.stringify(d));}
  }).catch(e=>alert('Gagal kirim: '+e));
};
</script>
</body>
</html>


